
<div data-ng-controller="trailController">

<div class="track-content">    
	<div class="glyphicons glyphicons-search" ng-if="!!fetching">
        <span>I'm fetching data. Please be patient.</span>
    </div>
    <div class="glyphicons glyphicons-search" ng-if="!fetching">
        <span>Fetching is complete.</span>
    </div>

    <div class="form-group search-wrap">
        <form role="search" data-ng-submit="search()">
            <div>
                <input type="text" class="form-control" placeholder="Search" data-ng-model="q">
            </div>
            <div>
                <input type="submit" class="form-control" value="جستجو">
            </div>
        </form>
    </div>

    <div class="trail-features">
        <span class="track-title" data-ng-bind="trail.Name"></span>
        <span class="track-Description" data-ng-bind="trail.Description"></span>
        <p class="track-title">خصوصیات</p>
		<ul>
            <li>
                <span class="glyphicons glyphicons-check"></span>
            </li>
			<li>
				<span class="feature-title">عنوان</span>
				<span class="feature" data-ng-bind="trail.Name"></span>
			</li>
			<li>
                <span class="feature-title">دشواری مسیر</span>
                <span class="feature" data-ng-bind="trail.DifficultyTitle"></span>
            </li>
            <li>
                <span class="feature-title">بهترین فصل</span>
                <span class="feature" data-ng-bind="trail.Season"></span>
            </li>
			<li>
				<span class="feature-title">شهر مبداء</span>
				<span class="feature" data-ng-bind="trail.DepartureCity"></span>
			</li>
			<li>
				<span class="feature-title">مسیر</span>
				<span class="feature" data-ng-bind="trail.DepartureCityPath"></span>
			</li>
			<li>
				<span class="feature-title">درجه سختی</span>
				<span class="feature" data-ng-bind="trail.DifficultyTitle"></span>
			</li>
			<li>
				<span class="feature-title">مدت زمان پیمایش</span>
				<span class="feature" data-ng-bind="trail.Duration"></span>
			</li>
			<li>
				<span class="feature-title">طول مسیر (متر)</span>
				<span class="feature" data-ng-bind="trail.Length"></span>
			</li>
			<li>
				<span class="feature-title">امداد</span>
				<span class="feature" data-ng-bind="trail.SosService"></span>
			</li>
        </ul>
    </div>
</div>
</div>
    <div id="map"></div>
    <div
        nvd3-sparkline-chart
        class="trail-elevation-chart"
        data="chartData"
        id="exampleId"
        x="xFunction()"
        y="yFunction()">
        <svg></svg>
    </div>

</div>

<script type="text/javascript">
    var map;
    var src = 'http://rahaeegallery.com/test/test.kml';

    function initMap() {
        var mapElement = document.getElementById('map'),
            mapOptions = {
                center: new google.maps.LatLng(35.71, 51.40),
                zoom: 2,
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };
        map = new google.maps.Map(mapElement, mapOptions);

        loadKmlLayer(src, map);
    }

    function loadKmlLayer(src, map) {
        var layerOptions = {
            suppressInfoWindows: true,
            preserveViewport: false,
            map: map
        };
        var kmlLayer = new google.maps.KmlLayer(src, layerOptions);

        google.maps.event.addListener(kmlLayer, 'click', onLayerClick);

        function onLayerClick (event) {
            var content = event.featureData.infoWindowHtml,
                testimonial = document.getElementById('capture');

            testimonial.innerHTML = content;
        }
    }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMYa2MeMowwvphSPuUurU0tXxuSh3OgcY&callback=initMap"></script>
